import{_ as k,C as r,c as o,o as a,a0 as n,b as p,w as i,a as t,G as e,a2 as h}from"./chunks/framework.DXI-tbPr.js";const C=JSON.parse('{"title":"Vue 3 项目工程化结构设计指南","description":"基于实际项目经验，总结 Vue 3 前端项目的工程化目录架构设计原则和最佳实践，提供可复用的、解耦的工程化结构方案。包含 Store + Composable + Hooks 核心架构模式和混合模式（core/shared/modules）三层结构设计。","frontmatter":{"title":"Vue 3 项目工程化结构设计指南","description":"基于实际项目经验，总结 Vue 3 前端项目的工程化目录架构设计原则和最佳实践，提供可复用的、解耦的工程化结构方案。包含 Store + Composable + Hooks 核心架构模式和混合模式（core/shared/modules）三层结构设计。","date":"2025-11-28T13:24:01.000Z","tags":["Vue","前端开发","工程化"]},"headers":[],"relativePath":"posts/Vue 3 项目工程化结构设计指南.md","filePath":"posts/Vue 3 项目工程化结构设计指南.md","lastUpdated":1766398079000}'),E={name:"posts/Vue 3 项目工程化结构设计指南.md"};function d(g,s,c,y,F,u){const l=r("Mermaid");return a(),o("div",null,[s[3]||(s[3]=n('<blockquote><p>本文基于实际 Vue 3 项目经验，从工程化角度分析前端项目结构设计，提取通用的、解耦的架构模式，帮助开发者构建可维护、可扩展、可测试的前端项目。文档包含经过实战验证的 <strong>Store + Composable + Hooks</strong> 核心架构模式，通过清晰的职责划分实现代码的可维护性和可测试性。</p></blockquote><h2 id="一、工程化结构设计原则" tabindex="-1">一、工程化结构设计原则 <a class="header-anchor" href="#一、工程化结构设计原则" aria-label="Permalink to &quot;一、工程化结构设计原则&quot;">​</a></h2><h3 id="_1-1-核心设计理念" tabindex="-1">1.1 核心设计理念 <a class="header-anchor" href="#_1-1-核心设计理念" aria-label="Permalink to &quot;1.1 核心设计理念&quot;">​</a></h3><h4 id="关注点分离-separation-of-concerns" tabindex="-1">关注点分离（Separation of Concerns） <a class="header-anchor" href="#关注点分离-separation-of-concerns" aria-label="Permalink to &quot;关注点分离（Separation of Concerns）&quot;">​</a></h4><p>将不同职责的代码分离到不同的目录和文件中，确保每个模块只关注自己的核心功能。</p><p><strong>实践要点：</strong></p><ul><li>API 调用逻辑独立于业务组件</li><li>类型定义集中管理，避免散落各处</li><li>样式、逻辑、模板分离（Vue SFC 内部也要保持清晰）</li></ul><h4 id="单一职责原则-single-responsibility-principle" tabindex="-1">单一职责原则（Single Responsibility Principle） <a class="header-anchor" href="#单一职责原则-single-responsibility-principle" aria-label="Permalink to &quot;单一职责原则（Single Responsibility Principle）&quot;">​</a></h4><p>每个文件、每个目录都应该有明确的单一职责。</p><p><strong>示例：</strong></p><ul><li><code>modules/user/composables/useUser.ts</code> 只负责用户相关的 API 调用</li><li><code>modules/user/stores/useUserStore.ts</code> 只管理用户相关的状态</li><li><code>modules/user/types/types.ts</code> 只定义用户相关的类型</li></ul><h4 id="模块化与解耦" tabindex="-1">模块化与解耦 <a class="header-anchor" href="#模块化与解耦" aria-label="Permalink to &quot;模块化与解耦&quot;">​</a></h4><p>通过模块化设计降低代码间的耦合度，提高代码的可复用性和可测试性。</p><p><strong>关键实践：</strong></p><ul><li>使用组合式函数（Composables）封装可复用逻辑</li><li>通过接口和类型定义实现模块间的契约</li><li>避免模块间的直接依赖，通过事件或状态管理通信</li></ul><h4 id="可维护性与可扩展性" tabindex="-1">可维护性与可扩展性 <a class="header-anchor" href="#可维护性与可扩展性" aria-label="Permalink to &quot;可维护性与可扩展性&quot;">​</a></h4><p>结构设计应该便于后续的维护和扩展。</p><p><strong>设计考虑：</strong></p><ul><li>新功能应该能够轻松添加到现有结构中</li><li>修改某个模块不应该影响其他模块</li><li>代码结构清晰，新成员能够快速理解</li></ul><h4 id="类型安全与开发体验" tabindex="-1">类型安全与开发体验 <a class="header-anchor" href="#类型安全与开发体验" aria-label="Permalink to &quot;类型安全与开发体验&quot;">​</a></h4><p>充分利用 TypeScript 的类型系统，提升开发效率和代码质量。</p><p><strong>实践建议：</strong></p><ul><li>为所有 API 请求和响应定义类型</li><li>使用类型推导减少重复的类型定义</li><li>利用 IDE 的类型提示提升开发体验</li></ul><h3 id="_1-2-混合模式架构-推荐标准" tabindex="-1">1.2 混合模式架构（推荐标准） <a class="header-anchor" href="#_1-2-混合模式架构-推荐标准" aria-label="Permalink to &quot;1.2 混合模式架构（推荐标准）&quot;">​</a></h3><p>混合模式是结合技术层次和功能领域的最佳实践，通过 <code>core/</code>、<code>shared/</code>、<code>modules/</code> 三层结构实现清晰的职责划分。</p><h4 id="为什么采用混合模式" tabindex="-1">为什么采用混合模式？ <a class="header-anchor" href="#为什么采用混合模式" aria-label="Permalink to &quot;为什么采用混合模式？&quot;">​</a></h4><p><strong>第一性原理思考：</strong></p><ol><li><strong>业务代码需要集中</strong>：相关功能的代码应该放在一起，便于理解和维护</li><li><strong>基础设施需要共享</strong>：HTTP 客户端、工具函数等应该被所有模块使用</li><li><strong>跨模块代码需要提取</strong>：被多个模块使用的代码应该放在共享层，避免重复</li></ol><p><strong>混合模式的优势：</strong></p><ul><li>✅ <strong>模块边界清晰</strong>：相关代码集中，易于理解业务逻辑</li><li>✅ <strong>支持并行协作</strong>：不同模块可并行开发，减少冲突</li><li>✅ <strong>便于模块拆分</strong>：模块自包含，可独立部署</li><li>✅ <strong>可扩展性强</strong>：新模块按相同结构添加，结构清晰</li></ul><h4 id="三层结构说明" tabindex="-1">三层结构说明 <a class="header-anchor" href="#三层结构说明" aria-label="Permalink to &quot;三层结构说明&quot;">​</a></h4>',31)),(a(),p(h,null,{default:i(()=>[e(l,{id:"mermaid-198",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20subgraph%20Core%5B%22core%2F%20%E6%A0%B8%E5%BF%83%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E5%B1%82%22%5D%0A%20%20%20%20%20%20%20%20direction%20TB%0A%20%20%20%20%20%20%20%20C1%5BHTTP%20%E5%AE%A2%E6%88%B7%E7%AB%AF%5D%0A%20%20%20%20%20%20%20%20C2%5B%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0%5D%0A%20%20%20%20%20%20%20%20C3%5B%E9%80%9A%E7%94%A8%E7%B1%BB%E5%9E%8B%5D%0A%20%20%20%20%20%20%20%20C4%5B%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20Shared%5B%22shared%2F%20%E5%85%B1%E4%BA%AB%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81%E5%B1%82%22%5D%0A%20%20%20%20%20%20%20%20direction%20TB%0A%20%20%20%20%20%20%20%20S1%5B%E8%B7%A8%E6%A8%A1%E5%9D%97%E7%BB%84%E4%BB%B6%5D%0A%20%20%20%20%20%20%20%20S2%5B%E5%85%B1%E4%BA%AB%E7%8A%B6%E6%80%81%5D%0A%20%20%20%20%20%20%20%20S3%5B%E5%85%B1%E4%BA%AB%E9%80%BB%E8%BE%91%5D%0A%20%20%20%20%20%20%20%20S4%5B%E5%85%B1%E4%BA%AB%E5%B8%B8%E9%87%8F%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20Modules%5B%22modules%2F%20%E4%B8%9A%E5%8A%A1%E6%A8%A1%E5%9D%97%E5%B1%82%22%5D%0A%20%20%20%20%20%20%20%20direction%20TB%0A%20%20%20%20%20%20%20%20M1%5Buser%20%E6%A8%A1%E5%9D%97%5D%0A%20%20%20%20%20%20%20%20M2%5Bproject%20%E6%A8%A1%E5%9D%97%5D%0A%20%20%20%20%20%20%20%20M3%5B%E5%85%B6%E4%BB%96%E6%A8%A1%E5%9D%97%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20Shared%20-.-%3E%7C%E4%BE%9D%E8%B5%96%7C%20Core%0A%20%20%20%20Modules%20-.-%3E%7C%E4%BE%9D%E8%B5%96%7C%20Core%0A%20%20%20%20Modules%20-.-%3E%7C%E4%BE%9D%E8%B5%96%7C%20Shared%0A%20%20%20%20%0A%20%20%20%20style%20Core%20fill%3A%23e1f5ff%2Cstroke%3A%231976d2%2Cstroke-width%3A2px%0A%20%20%20%20style%20Shared%20fill%3A%23fff4e1%2Cstroke%3A%23f57c00%2Cstroke-width%3A2px%0A%20%20%20%20style%20Modules%20fill%3A%23e8f5e9%2Cstroke%3A%23388e3c%2Cstroke-width%3A2px%0A"})]),fallback:i(()=>[...s[0]||(s[0]=[t(" Loading... ",-1)])]),_:1})),s[4]||(s[4]=n(`<p><strong>1. core/ - 核心基础设施层</strong></p><ul><li><strong>职责</strong>：纯技术基础设施，不包含任何业务逻辑</li><li><strong>内容</strong>：HTTP 客户端、工具函数、通用类型、基础服务</li><li><strong>特点</strong>：被所有模块依赖，但不依赖任何业务模块</li><li><strong>判断标准</strong>：是否与业务无关，是否被所有模块使用</li></ul><p><strong>2. shared/ - 共享业务代码层</strong></p><ul><li><strong>职责</strong>：跨模块共享的业务代码</li><li><strong>内容</strong>：跨模块组件、共享状态、共享组合式函数、共享常量</li><li><strong>特点</strong>：包含业务逻辑，但被多个模块使用</li><li><strong>判断标准</strong>：是否被 3+ 个模块使用，是否包含业务逻辑</li></ul><p><strong>3. modules/ - 业务模块层</strong></p><ul><li><strong>职责</strong>：特定业务领域的完整实现</li><li><strong>内容</strong>：模块特定的 API、类型、状态、组件、视图</li><li><strong>特点</strong>：模块自包含，可独立开发和部署</li><li><strong>判断标准</strong>：是否只属于某个业务领域</li></ul><h4 id="完整混合模式结构" tabindex="-1">完整混合模式结构 <a class="header-anchor" href="#完整混合模式结构" aria-label="Permalink to &quot;完整混合模式结构&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/</span></span>
<span class="line"><span>├── main.ts                 # 应用入口</span></span>
<span class="line"><span>├── App.vue                 # 根组件</span></span>
<span class="line"><span>├── vite-env.d.ts           # Vite 类型声明</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── core/                   # 核心基础设施层</span></span>
<span class="line"><span>│   ├── api/                # HTTP 客户端、拦截器</span></span>
<span class="line"><span>│   │   ├── client/</span></span>
<span class="line"><span>│   │   ├── interceptors/</span></span>
<span class="line"><span>│   │   └── services/</span></span>
<span class="line"><span>│   ├── utils/              # 纯工具函数（无业务逻辑）</span></span>
<span class="line"><span>│   │   ├── format.ts</span></span>
<span class="line"><span>│   │   ├── validation.ts</span></span>
<span class="line"><span>│   │   └── storage.ts</span></span>
<span class="line"><span>│   └── types/              # 通用类型定义</span></span>
<span class="line"><span>│       ├── common/</span></span>
<span class="line"><span>│       └── index.ts</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── shared/                 # 共享业务代码层</span></span>
<span class="line"><span>│   ├── components/         # 跨模块组件</span></span>
<span class="line"><span>│   │   ├── layout/</span></span>
<span class="line"><span>│   │   ├── form/</span></span>
<span class="line"><span>│   │   └── common/</span></span>
<span class="line"><span>│   ├── stores/             # 跨模块状态</span></span>
<span class="line"><span>│   │   └── useAuthStore.ts</span></span>
<span class="line"><span>│   ├── composables/        # 跨模块逻辑</span></span>
<span class="line"><span>│   │   ├── usePagination.ts</span></span>
<span class="line"><span>│   │   └── useForm.ts</span></span>
<span class="line"><span>│   ├── hooks/              # 跨模块业务逻辑</span></span>
<span class="line"><span>│   │   └── usePageHeader.ts</span></span>
<span class="line"><span>│   └── constants/          # 共享常量</span></span>
<span class="line"><span>│       └── api.ts</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── modules/                # 业务模块层</span></span>
<span class="line"><span>│   ├── user/               # 用户模块</span></span>
<span class="line"><span>│   │   ├── router.ts        # 模块路由配置</span></span>
<span class="line"><span>│   │   ├── index.ts         # 模块统一导出</span></span>
<span class="line"><span>│   │   ├── constants/       # 模块常量</span></span>
<span class="line"><span>│   │   ├── types/           # 模块类型</span></span>
<span class="line"><span>│   │   ├── composables/     # API 调用封装</span></span>
<span class="line"><span>│   │   ├── stores/          # 状态管理</span></span>
<span class="line"><span>│   │   ├── hooks/           # 业务逻辑层</span></span>
<span class="line"><span>│   │   ├── utils/           # 模块工具函数</span></span>
<span class="line"><span>│   │   ├── components/      # 模块组件</span></span>
<span class="line"><span>│   │   └── views/           # 模块视图</span></span>
<span class="line"><span>│   └── project/            # 项目模块</span></span>
<span class="line"><span>│       └── [相同结构]</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── router/                 # 路由（共享）</span></span>
<span class="line"><span>│   ├── index.ts</span></span>
<span class="line"><span>│   ├── guards.ts</span></span>
<span class="line"><span>│   └── modules/</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── styles/                 # 样式（共享）</span></span>
<span class="line"><span>│   ├── global.css</span></span>
<span class="line"><span>│   └── variables.css</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── locales/                # 国际化（共享）</span></span>
<span class="line"><span>│   ├── index.ts</span></span>
<span class="line"><span>│   └── modules/</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── plugins/                # 插件（共享）</span></span>
<span class="line"><span>│   └── i18n.ts</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>└── assets/                 # 资源（共享）</span></span>
<span class="line"><span>    ├── images/</span></span>
<span class="line"><span>    └── fonts/</span></span></code></pre></div><h4 id="代码放置决策树" tabindex="-1">代码放置决策树 <a class="header-anchor" href="#代码放置决策树" aria-label="Permalink to &quot;代码放置决策树&quot;">​</a></h4>`,9)),(a(),p(h,null,{default:i(()=>[e(l,{id:"mermaid-281",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%E6%96%B0%E4%BB%A3%E7%A0%81%E5%BA%94%E8%AF%A5%E6%94%BE%E5%9C%A8%E5%93%AA%E9%87%8C%3F%5D%20--%3E%20B%7B%E6%98%AF%E5%90%A6%E8%A2%AB%203%2B%20%E4%B8%AA%3Cbr%2F%3E%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8%3F%7D%0A%20%20%20%20B%20--%3E%7C%E6%98%AF%7C%20C%7B%E6%98%AF%E5%90%A6%E6%98%AF%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%3F%3Cbr%2F%3EHTTP%E3%80%81%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0%E3%80%81%E9%80%9A%E7%94%A8%E7%B1%BB%E5%9E%8B%7D%0A%20%20%20%20C%20--%3E%7C%E6%98%AF%7C%20D%5Bcore%2F%3Cbr%2F%3E%E6%A0%B8%E5%BF%83%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E5%B1%82%5D%0A%20%20%20%20C%20--%3E%7C%E5%90%A6%7C%20E%5Bshared%2F%3Cbr%2F%3E%E5%85%B1%E4%BA%AB%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81%E5%B1%82%5D%0A%20%20%20%20B%20--%3E%7C%E5%90%A6%7C%20F%7B%E6%98%AF%E5%90%A6%E5%B1%9E%E4%BA%8E%3Cbr%2F%3E%E6%9F%90%E4%B8%AA%E4%B8%9A%E5%8A%A1%E6%A8%A1%E5%9D%97%3F%7D%0A%20%20%20%20F%20--%3E%7C%E6%98%AF%7C%20G%5B%22modules%2F%5Bmodule%5D%2F%3Cbr%2F%3E%E4%B8%9A%E5%8A%A1%E6%A8%A1%E5%9D%97%E5%B1%82%22%5D%0A%20%20%20%20F%20--%3E%7C%E5%90%A6%7C%20E%0A%20%20%20%20%0A%20%20%20%20style%20D%20fill%3A%23e1f5ff%0A%20%20%20%20style%20E%20fill%3A%23fff4e1%0A%20%20%20%20style%20G%20fill%3A%23e8f5e9%0A"})]),fallback:i(()=>[...s[1]||(s[1]=[t(" Loading... ",-1)])]),_:1})),s[5]||(s[5]=n('<h4 id="划分标准详解" tabindex="-1">划分标准详解 <a class="header-anchor" href="#划分标准详解" aria-label="Permalink to &quot;划分标准详解&quot;">​</a></h4><p><strong>core/ 的判断标准：</strong></p><ul><li>✅ HTTP 客户端封装和拦截器</li><li>✅ 纯工具函数（格式化、验证、存储等）</li><li>✅ 通用类型定义（响应、分页等）</li><li>✅ 基础服务（认证服务等）</li><li>❌ 不包含任何业务逻辑</li><li>❌ 不依赖任何业务模块</li></ul><p><strong>shared/ 的判断标准：</strong></p><ul><li>✅ 被 3+ 个模块使用的组件</li><li>✅ 跨模块的状态管理</li><li>✅ 跨模块的组合式函数</li><li>✅ 共享的业务常量</li><li>❌ 只被 1-2 个模块使用的代码（应放在模块内）</li></ul><p><strong>modules/ 的判断标准：</strong></p><ul><li>✅ 只属于某个业务领域的代码</li><li>✅ 模块特定的 API、类型、组件</li><li>✅ 模块可能独立部署或复用</li><li>❌ 被多个模块使用的代码（应放在 shared/）</li></ul><h2 id="二、核心架构模式-store-composable-hooks" tabindex="-1">二、核心架构模式（Store + Composable + Hooks） <a class="header-anchor" href="#二、核心架构模式-store-composable-hooks" aria-label="Permalink to &quot;二、核心架构模式（Store + Composable + Hooks）&quot;">​</a></h2><p>这是经过实战验证的最佳架构模式，通过清晰的职责划分实现代码的可维护性和可测试性。</p><h3 id="_2-1-为什么需要这种架构" tabindex="-1">2.1 为什么需要这种架构？ <a class="header-anchor" href="#_2-1-为什么需要这种架构" aria-label="Permalink to &quot;2.1 为什么需要这种架构？&quot;">​</a></h3><p><strong>第一性原理思考：</strong></p><ol><li><strong>API 调用应该独立</strong>：API 调用是纯函数，不应该管理状态，便于复用和测试</li><li><strong>状态需要集中管理</strong>：跨组件共享的状态应该在 Store 中管理，避免数据不一致</li><li><strong>业务逻辑需要封装</strong>：复杂的业务逻辑（搜索防抖、错误处理等）应该在 Hooks 中封装，避免在组件中重复</li></ol><p><strong>架构优势：</strong></p><ul><li>✅ <strong>职责清晰</strong>：每层都有明确的单一职责</li><li>✅ <strong>易于测试</strong>：各层可独立测试</li><li>✅ <strong>易于维护</strong>：修改某层不影响其他层</li><li>✅ <strong>易于复用</strong>：Composable 和 Store 可在多处复用</li><li>✅ <strong>类型安全</strong>：完整的 TypeScript 类型支持</li></ul><h3 id="_2-2-架构层次说明" tabindex="-1">2.2 架构层次说明 <a class="header-anchor" href="#_2-2-架构层次说明" aria-label="Permalink to &quot;2.2 架构层次说明&quot;">​</a></h3>',15)),(a(),p(h,null,{default:i(()=>[e(l,{id:"mermaid-437",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20subgraph%20View%5B%22View%20%E8%A7%86%E5%9B%BE%E5%B1%82%22%5D%0A%20%20%20%20%20%20%20%20V%5BView%20Component%3Cbr%2F%3E%E9%A1%B5%E9%9D%A2%E7%BB%84%E4%BB%B6%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20Hooks%5B%22Hooks%20%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%B1%82%22%5D%0A%20%20%20%20%20%20%20%20H%5BuseXxxList%3Cbr%2F%3EuseXxxForm%3Cbr%2F%3E%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E7%BB%84%E5%90%88%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20Store%5B%22Store%20%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B1%82%22%5D%0A%20%20%20%20%20%20%20%20S%5BuseXxxStore%3Cbr%2F%3E%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%3Cbr%2F%3E%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20Composable%5B%22Composable%20API%20%E5%B1%82%22%5D%0A%20%20%20%20%20%20%20%20C%5BuseXxx%3Cbr%2F%3E%E7%BA%AF%20API%20%E8%B0%83%E7%94%A8%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20API%5B%22API%20Service%20%E5%B1%82%22%5D%0A%20%20%20%20%20%20%20%20A%5BHTTP%20Client%3Cbr%2F%3EAPI%20%E6%9C%8D%E5%8A%A1%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20V%20--%3E%7C%E4%BD%BF%E7%94%A8%7C%20H%0A%20%20%20%20H%20--%3E%7C%E4%BD%BF%E7%94%A8%7C%20S%0A%20%20%20%20H%20--%3E%7C%E4%BD%BF%E7%94%A8%7C%20C%0A%20%20%20%20S%20--%3E%7C%E8%B0%83%E7%94%A8%7C%20C%0A%20%20%20%20C%20--%3E%7C%E8%B0%83%E7%94%A8%7C%20A%0A%20%20%20%20%0A%20%20%20%20style%20View%20fill%3A%23e8f5e9%0A%20%20%20%20style%20Hooks%20fill%3A%23fff4e1%0A%20%20%20%20style%20Store%20fill%3A%23e1f5ff%0A%20%20%20%20style%20Composable%20fill%3A%23f3e5f5%0A%20%20%20%20style%20API%20fill%3A%23fce4ec%0A"})]),fallback:i(()=>[...s[2]||(s[2]=[t(" Loading... ",-1)])]),_:1})),s[6]||(s[6]=n(`<h3 id="_2-3-各层职责详解" tabindex="-1">2.3 各层职责详解 <a class="header-anchor" href="#_2-3-各层职责详解" aria-label="Permalink to &quot;2.3 各层职责详解&quot;">​</a></h3><h4 id="_1-composable-层-api-调用封装" tabindex="-1">1. Composable 层（API 调用封装） <a class="header-anchor" href="#_1-composable-层-api-调用封装" aria-label="Permalink to &quot;1. Composable 层（API 调用封装）&quot;">​</a></h4><p><strong>职责</strong>：纯 API 调用函数，不管理状态</p><p><strong>核心特点：</strong></p><ul><li>不包含 <code>loading</code>、<code>error</code> 状态（这些在 Store 中管理）</li><li>每次调用都是独立的，无实例状态</li><li>只负责 HTTP 请求的封装</li></ul><p><strong>示例：</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// modules/project/composables/useProject.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> http </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/core/api/client&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ApiResponse, Page } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/core/types/common&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { PROJECT_API_ENDPOINTS } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../constants/api&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Project, ProjectListParams } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../types&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useProject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getProjectList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProjectListParams</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ApiResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Page</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ApiResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Page</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;&gt;(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      PROJECT_API_ENDPOINTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LIST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { params }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getProject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ApiResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ApiResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      PROJECT_API_ENDPOINTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DETAIL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deleteProject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ApiResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ApiResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      PROJECT_API_ENDPOINTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DELETE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { getProjectList, getProject, deleteProject }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-store-层-状态管理" tabindex="-1">2. Store 层（状态管理） <a class="header-anchor" href="#_2-store-层-状态管理" aria-label="Permalink to &quot;2. Store 层（状态管理）&quot;">​</a></h4><p><strong>职责</strong>：管理跨组件共享的状态</p><p><strong>核心特点：</strong></p><ul><li>调用 Composable 获取数据</li><li>管理 <code>loading</code>、<code>error</code>、数据状态</li><li>提供缓存机制</li><li>状态持久化（如需要）</li></ul><p><strong>示例：</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// modules/project/stores/useProjectStore.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineStore } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;pinia&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ref } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useProject } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../composables/useProject&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Project, ProjectListParams } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../types&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> useProjectStore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;project&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 状态</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> projects</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]&gt;([])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> loading</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 筛选和分页状态</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> filters</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ searchQuery: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, status: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pagination</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ page: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, size: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, total: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pages: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Store 调用 Composable</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getProjectList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useProject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">overrides</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Partial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProjectListParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    loading.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    error.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page: pagination.value.page,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        size: pagination.value.size,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">filters.value,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">overrides,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getProjectList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(params)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pageData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res.data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      projects.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pageData.items</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      pagination.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        page: pageData.page,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        size: pageData.size,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        total: pageData.total,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        pages: pageData.pages,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> msg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err.message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;获取项目列表失败&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      error.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> msg</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      loading.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    projects,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    loading,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    error,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    filters,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    pagination,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fetchList,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h4 id="_3-hooks-层-业务逻辑" tabindex="-1">3. Hooks 层（业务逻辑） <a class="header-anchor" href="#_3-hooks-层-业务逻辑" aria-label="Permalink to &quot;3. Hooks 层（业务逻辑）&quot;">​</a></h4><p><strong>职责</strong>：组合 Store 和 Composable，封装业务逻辑</p><p><strong>核心特点：</strong></p><ul><li>组合 Store 的状态和 Composable 的方法</li><li>处理业务逻辑（搜索防抖、错误处理、Toast 提示等）</li><li>提供便捷的业务方法给 View 使用</li></ul><p><strong>示例：</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// modules/project/hooks/useProjectList.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { computed } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { toast } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue-sonner&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useDebounceFn } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vueuse/core&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useProjectStore } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../stores/useProjectStore&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useProject } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../composables/useProject&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useProjectList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> store</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useProjectStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">deleteProject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useProject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 搜索处理（带防抖）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> handleSearch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useDebounceFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    store.filters.searchQuery </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> query</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    store.pagination.page </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 删除处理</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleDelete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> toastId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> toast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;正在删除项目...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deleteProject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      toast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;删除成功&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { id: toastId })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      toast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;删除失败&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { id: toastId })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 状态（从 Store 获取）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    loading: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">computed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.loading),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    projects: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">computed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.projects),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    error: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">computed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.error),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    filters: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">computed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.filters),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    pagination: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">computed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.pagination),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 方法</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fetchList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    handleSearch,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    handleDelete,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_4-view-层-页面视图" tabindex="-1">4. View 层（页面视图） <a class="header-anchor" href="#_4-view-层-页面视图" aria-label="Permalink to &quot;4. View 层（页面视图）&quot;">​</a></h4><p><strong>职责</strong>：页面布局和组件组装</p><p><strong>核心特点：</strong></p><ul><li>使用 Hooks 获取业务逻辑</li><li>最小化业务逻辑，保持简洁</li><li>只负责 UI 协调</li></ul><p><strong>示例：</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// modules/project/views/ProjectListView.vue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AppLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ProjectToolbar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      :search</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;filters.searchQuery&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @search</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;handleSearch&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ProjectTable</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      :projects</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;projects&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      :loading</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loading&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">delete=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;handleDelete&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  &lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AppLayout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">script setup lang</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { onMounted } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { AppLayout } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/shared/components/layout&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ProjectToolbar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../components/ProjectToolbar.vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ProjectTable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../components/ProjectTable.vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useProjectList } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../hooks/useProjectList&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  loading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  projects</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  fetchList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  handleSearch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  handleDelete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useProjectList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><h3 id="_2-4-数据流" tabindex="-1">2.4 数据流 <a class="header-anchor" href="#_2-4-数据流" aria-label="Permalink to &quot;2.4 数据流&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>View (ProjectListView)</span></span>
<span class="line"><span>  ↓ 使用</span></span>
<span class="line"><span>Hook (useProjectList)</span></span>
<span class="line"><span>  ↓ 使用</span></span>
<span class="line"><span>Store (useProjectStore) + Composable (useProject)</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>API Service</span></span></code></pre></div><h3 id="_2-5-何时使用-hooks" tabindex="-1">2.5 何时使用 Hooks？ <a class="header-anchor" href="#_2-5-何时使用-hooks" aria-label="Permalink to &quot;2.5 何时使用 Hooks？&quot;">​</a></h3><p><strong>需要使用 Hooks 的场景：</strong></p><ul><li>✅ 复杂的业务逻辑（搜索防抖、表单验证、错误处理）</li><li>✅ 需要组合多个 Store 和 Composable</li><li>✅ 需要处理用户交互（Toast、确认对话框等）</li><li>✅ 需要封装页面级别的业务逻辑</li></ul><p><strong>不需要 Hooks 的场景：</strong></p><ul><li>❌ 纯展示页面（无复杂交互，可直接使用 Store）</li><li>❌ 工具函数（应放在 <code>utils/</code>）</li><li>❌ 简单的状态读取（可直接在组件中使用 Store）</li></ul><p><strong>注意</strong>：即使是简单的 CRUD 操作，也建议使用 Hooks 封装，保持架构一致性，便于后续扩展。</p><h2 id="三、模块内部结构" tabindex="-1">三、模块内部结构 <a class="header-anchor" href="#三、模块内部结构" aria-label="Permalink to &quot;三、模块内部结构&quot;">​</a></h2><h3 id="_3-1-标准模块结构" tabindex="-1">3.1 标准模块结构 <a class="header-anchor" href="#_3-1-标准模块结构" aria-label="Permalink to &quot;3.1 标准模块结构&quot;">​</a></h3><p><strong>目录结构：</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>modules/user/</span></span>
<span class="line"><span>├── router.ts            # 模块路由配置（可选）</span></span>
<span class="line"><span>├── index.ts             # 模块统一导出</span></span>
<span class="line"><span>├── constants/           # 模块常量</span></span>
<span class="line"><span>│   ├── api.ts          # API 端点常量</span></span>
<span class="line"><span>│   ├── routes.ts       # 路由常量</span></span>
<span class="line"><span>│   └── index.ts        # 常量统一导出</span></span>
<span class="line"><span>├── types/              # 模块类型</span></span>
<span class="line"><span>│   ├── types.ts        # 实体类型</span></span>
<span class="line"><span>│   ├── requests.ts     # 请求类型</span></span>
<span class="line"><span>│   ├── responses.ts    # 响应类型</span></span>
<span class="line"><span>│   └── index.ts        # 类型统一导出</span></span>
<span class="line"><span>├── composables/        # API 调用封装（纯函数）</span></span>
<span class="line"><span>│   └── useUser.ts      # 用户相关 API 方法</span></span>
<span class="line"><span>├── stores/             # 状态管理（跨组件共享）</span></span>
<span class="line"><span>│   ├── useUserStore.ts # 用户状态管理</span></span>
<span class="line"><span>│   └── index.ts        # Store 统一导出</span></span>
<span class="line"><span>├── hooks/              # 业务逻辑层（组合 Store + Composable）</span></span>
<span class="line"><span>│   ├── useUserList.ts  # 用户列表业务逻辑</span></span>
<span class="line"><span>│   ├── useUserForm.ts  # 用户表单业务逻辑</span></span>
<span class="line"><span>│   └── index.ts        # Hooks 统一导出</span></span>
<span class="line"><span>├── utils/              # 模块工具函数（纯函数）</span></span>
<span class="line"><span>│   ├── userUtils.ts    # 用户相关工具函数</span></span>
<span class="line"><span>│   └── index.ts        # Utils 统一导出</span></span>
<span class="line"><span>├── components/         # 模块组件</span></span>
<span class="line"><span>│   ├── UserForm.vue</span></span>
<span class="line"><span>│   ├── UserFormDialog.vue</span></span>
<span class="line"><span>│   └── UserTable.vue</span></span>
<span class="line"><span>└── views/              # 模块视图</span></span>
<span class="line"><span>    ├── UserListView.vue</span></span>
<span class="line"><span>    └── UserDetailView.vue</span></span></code></pre></div><p><strong>各层职责说明：</strong></p><ul><li><strong>constants/</strong>：模块常量（API 端点、路由路径等）</li><li><strong>types/</strong>：模块类型定义（实体类型、请求/响应类型）</li><li><strong>composables/</strong>：纯 API 调用，不管理状态</li><li><strong>stores/</strong>：状态管理，调用 Composable 获取数据</li><li><strong>hooks/</strong>：业务逻辑，组合 Store 和 Composable</li><li><strong>utils/</strong>：纯工具函数，不依赖 Vue 和业务逻辑</li><li><strong>components/</strong>：UI 组件，最小业务逻辑</li><li><strong>views/</strong>：页面视图，组装组件和 Hooks</li><li><strong>router.ts</strong>：模块路由配置（可选，业务模块路由在模块内）</li></ul><h3 id="_3-2-模块导出规范" tabindex="-1">3.2 模块导出规范 <a class="header-anchor" href="#_3-2-模块导出规范" aria-label="Permalink to &quot;3.2 模块导出规范&quot;">​</a></h3><p><strong>标准导出结构：</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// modules/project/index.ts</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 组件导出（Vue 组件使用默认导出，在 index.ts 中重新导出为命名导出）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ProjectTable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./components/ProjectTable.vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ProjectToolbar } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./components/ProjectToolbar.vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ProjectListView } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./views/ProjectListView.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Composables 导出</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./composables/useProject&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Stores 导出</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./stores&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Hooks 导出</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./hooks&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Types 导出</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./types&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Utils 导出</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./utils&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Constants 导出</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./constants&#39;</span></span></code></pre></div><p><strong>子目录导出示例：</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// modules/project/stores/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useProjectStore } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./useProjectStore&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// modules/project/hooks/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useProjectList } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./useProjectList&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useProjectForm } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./useProjectForm&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// modules/project/utils/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./projectUtils&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// modules/project/types/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./types&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./requests&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./responses&#39;</span></span></code></pre></div><p><strong>使用方式：</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 从模块入口导入</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useProjectList, ProjectTable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/modules/project&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 或从具体路径导入（更精确）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useProjectList } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/modules/project/hooks&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ProjectTable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/modules/project/components&#39;</span></span></code></pre></div><h3 id="_3-3-简化模块结构-可选" tabindex="-1">3.3 简化模块结构（可选） <a class="header-anchor" href="#_3-3-简化模块结构-可选" aria-label="Permalink to &quot;3.3 简化模块结构（可选）&quot;">​</a></h3><p>对于小型模块（代码量 &lt; 500 行），可以使用简化结构：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>modules/user/</span></span>
<span class="line"><span>├── components/         # 模块组件</span></span>
<span class="line"><span>│   └── UserForm.vue</span></span>
<span class="line"><span>└── views/              # 模块视图</span></span>
<span class="line"><span>    └── UserListView.vue</span></span></code></pre></div><p><strong>使用简化结构的条件：</strong></p><ul><li>模块代码量 &lt; 500 行</li><li>功能简单，主要是展示和基础交互</li><li>不需要复杂的状态管理和业务逻辑</li><li>共享代码较多，放在 <code>shared/</code> 或 <code>core/</code> 更合适</li></ul><p><strong>注意</strong>：如果模块后续可能扩展，建议直接使用标准结构，避免后续重构成本。</p><h2 id="四、目录结构详解" tabindex="-1">四、目录结构详解 <a class="header-anchor" href="#四、目录结构详解" aria-label="Permalink to &quot;四、目录结构详解&quot;">​</a></h2><h3 id="_4-1-core-核心基础设施层" tabindex="-1">4.1 core/ 核心基础设施层 <a class="header-anchor" href="#_4-1-core-核心基础设施层" aria-label="Permalink to &quot;4.1 core/ 核心基础设施层&quot;">​</a></h3><p><strong>职责</strong>：纯技术基础设施，不包含任何业务逻辑</p><p><strong>目录结构：</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>core/</span></span>
<span class="line"><span>├── api/                # HTTP 客户端、拦截器</span></span>
<span class="line"><span>│   ├── client/         # HTTP 客户端封装</span></span>
<span class="line"><span>│   ├── interceptors/   # 请求/响应拦截器</span></span>
<span class="line"><span>│   └── services/       # 基础服务（认证等）</span></span>
<span class="line"><span>├── utils/              # 纯工具函数</span></span>
<span class="line"><span>│   ├── format.ts       # 日期、数字格式化</span></span>
<span class="line"><span>│   ├── validation.ts   # 验证工具</span></span>
<span class="line"><span>│   ├── storage.ts      # 本地存储</span></span>
<span class="line"><span>│   └── url.ts          # URL 处理</span></span>
<span class="line"><span>└── types/              # 通用类型</span></span>
<span class="line"><span>    ├── common/         # 通用类型（响应、分页等）</span></span>
<span class="line"><span>    └── index.ts</span></span></code></pre></div><h3 id="_4-2-shared-共享业务代码层" tabindex="-1">4.2 shared/ 共享业务代码层 <a class="header-anchor" href="#_4-2-shared-共享业务代码层" aria-label="Permalink to &quot;4.2 shared/ 共享业务代码层&quot;">​</a></h3><p><strong>职责</strong>：跨模块共享的业务代码</p><p><strong>目录结构：</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>shared/</span></span>
<span class="line"><span>├── components/         # 跨模块组件</span></span>
<span class="line"><span>│   ├── layout/         # 布局组件</span></span>
<span class="line"><span>│   ├── form/           # 表单组件</span></span>
<span class="line"><span>│   └── common/         # 通用业务组件</span></span>
<span class="line"><span>├── stores/             # 跨模块状态</span></span>
<span class="line"><span>│   └── useAuthStore.ts</span></span>
<span class="line"><span>├── composables/        # 跨模块逻辑</span></span>
<span class="line"><span>│   ├── usePagination.ts</span></span>
<span class="line"><span>│   └── useForm.ts</span></span>
<span class="line"><span>├── hooks/              # 跨模块业务逻辑</span></span>
<span class="line"><span>│   └── usePageHeader.ts</span></span>
<span class="line"><span>└── constants/          # 共享常量</span></span>
<span class="line"><span>    └── api.ts</span></span></code></pre></div><p><strong>shared/hooks/ 使用场景：</strong></p><ul><li>跨模块的业务逻辑封装</li><li>页面级别的通用逻辑（如页面标题设置）</li><li>需要组合多个 shared stores 或 composables 的逻辑</li></ul><h3 id="_4-3-modules-业务模块层" tabindex="-1">4.3 modules/ 业务模块层 <a class="header-anchor" href="#_4-3-modules-业务模块层" aria-label="Permalink to &quot;4.3 modules/ 业务模块层&quot;">​</a></h3><p><strong>职责</strong>：特定业务领域的完整实现</p><p><strong>目录结构：</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>modules/</span></span>
<span class="line"><span>└── user/               # 用户模块</span></span>
<span class="line"><span>    ├── router.ts        # 模块路由配置（可选）</span></span>
<span class="line"><span>    ├── index.ts         # 模块统一导出</span></span>
<span class="line"><span>    ├── constants/       # 模块常量</span></span>
<span class="line"><span>    │   ├── api.ts      # API 端点常量</span></span>
<span class="line"><span>    │   ├── routes.ts   # 路由常量</span></span>
<span class="line"><span>    │   └── index.ts    # 常量统一导出</span></span>
<span class="line"><span>    ├── types/           # 模块类型</span></span>
<span class="line"><span>    │   ├── types.ts    # 实体类型</span></span>
<span class="line"><span>    │   ├── requests.ts # 请求类型</span></span>
<span class="line"><span>    │   ├── responses.ts # 响应类型</span></span>
<span class="line"><span>    │   └── index.ts    # 类型统一导出</span></span>
<span class="line"><span>    ├── composables/     # API 调用封装</span></span>
<span class="line"><span>    ├── stores/          # 状态管理</span></span>
<span class="line"><span>    ├── hooks/           # 业务逻辑层</span></span>
<span class="line"><span>    ├── utils/           # 模块工具函数</span></span>
<span class="line"><span>    ├── components/      # 模块组件</span></span>
<span class="line"><span>    └── views/           # 模块视图</span></span></code></pre></div><p><strong>模块路由配置（router.ts）：</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// modules/user/router.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { RouteRecordRaw } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue-router&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { USER_ROUTES } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./constants/routes&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> userRoutes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RouteRecordRaw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">USER_ROUTES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LIST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;UserList&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./views/UserListView.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">USER_ROUTES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DETAIL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;UserDetail&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./views/UserDetailView.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p>在 <code>router/modules/index.ts</code> 中导入：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { userRoutes } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/modules/user/router&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { projectRoutes } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/modules/project/router&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ... 其他模块路由</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> moduleRoutes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">userRoutes,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">projectRoutes,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ... 其他模块路由</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><h3 id="_4-4-模块常量说明" tabindex="-1">4.4 模块常量说明 <a class="header-anchor" href="#_4-4-模块常量说明" aria-label="Permalink to &quot;4.4 模块常量说明&quot;">​</a></h3><p><strong>constants/</strong> 目录用于存放模块相关的常量：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// modules/user/constants/api.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> USER_API_ENDPOINTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  LIST: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  DETAIL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`/users/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  CREATE: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`/users/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  DELETE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`/users/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// modules/user/constants/routes.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> USER_ROUTES</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  LIST: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  DETAIL: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/users/:id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span></span></code></pre></div><p><strong>设计要点：</strong></p><ul><li>使用 <code>as const</code> 确保类型安全</li><li>API 端点统一管理，便于维护</li><li>路由路径统一管理，避免硬编码</li></ul><h3 id="_4-5-其他共享目录" tabindex="-1">4.5 其他共享目录 <a class="header-anchor" href="#_4-5-其他共享目录" aria-label="Permalink to &quot;4.5 其他共享目录&quot;">​</a></h3><p><strong>router/</strong> - 路由配置</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>router/</span></span>
<span class="line"><span>├── index.ts            # 路由主入口</span></span>
<span class="line"><span>├── guards.ts           # 路由守卫</span></span>
<span class="line"><span>└── modules/            # 路由模块统一管理</span></span>
<span class="line"><span>    ├── index.ts        # 路由模块统一导出（从 modules/{module}/router.ts 导入）</span></span>
<span class="line"><span>    └── common.ts       # 通用路由（首页、404、403 等）</span></span></code></pre></div><p><strong>路由配置说明：</strong></p><ul><li>业务模块路由在模块内的 <code>router.ts</code> 中定义</li><li>在 <code>router/modules/index.ts</code> 中统一导入所有模块路由</li><li>通用路由（首页、404、403）放在 <code>router/modules/common.ts</code></li></ul><p><strong>styles/</strong> - 样式</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>styles/</span></span>
<span class="line"><span>├── global.css          # 全局样式</span></span>
<span class="line"><span>└── variables.css       # CSS 变量</span></span></code></pre></div><p><strong>locales/</strong> - 国际化</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>locales/</span></span>
<span class="line"><span>├── index.ts            # i18n 配置入口</span></span>
<span class="line"><span>└── modules/            # 按模块组织的语言包</span></span></code></pre></div><p><strong>plugins/</strong> - 插件配置</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>plugins/</span></span>
<span class="line"><span>└── i18n.ts             # 国际化插件配置</span></span></code></pre></div><h2 id="五、命名规范与约定" tabindex="-1">五、命名规范与约定 <a class="header-anchor" href="#五、命名规范与约定" aria-label="Permalink to &quot;五、命名规范与约定&quot;">​</a></h2><h3 id="_5-1-文件命名规范" tabindex="-1">5.1 文件命名规范 <a class="header-anchor" href="#_5-1-文件命名规范" aria-label="Permalink to &quot;5.1 文件命名规范&quot;">​</a></h3><p><strong>Vue 组件：</strong> PascalCase</p><ul><li>示例：<code>UserFormDialog.vue</code>、<code>ProjectListView.vue</code></li></ul><p><strong>TypeScript 文件：</strong></p><ul><li>工具函数：camelCase（<code>formatDate.ts</code>）</li><li>类型定义：PascalCase（<code>UserType.ts</code>）</li><li>Store：camelCase，以 <code>Store.ts</code> 结尾（<code>useUserStore.ts</code>）</li><li>Composable：camelCase，以 <code>use</code> 开头（<code>usePagination.ts</code>）</li></ul><p><strong>常量文件：</strong> camelCase 或 kebab-case</p><ul><li>示例：<code>constants.ts</code>、<code>api-constants.ts</code></li></ul><h3 id="_5-2-目录命名规范" tabindex="-1">5.2 目录命名规范 <a class="header-anchor" href="#_5-2-目录命名规范" aria-label="Permalink to &quot;5.2 目录命名规范&quot;">​</a></h3><p><strong>推荐方式：</strong></p><ul><li>小写字母 + 连字符：<code>user-management/</code></li><li>纯小写字母：<code>utils/</code>、<code>stores/</code></li></ul><p><strong>不推荐：</strong></p><ul><li>驼峰命名：<code>userManagement/</code></li><li>下划线：<code>user_management/</code></li><li>大写字母：<code>UserManagement/</code></li></ul><h3 id="_5-3-导出规范" tabindex="-1">5.3 导出规范 <a class="header-anchor" href="#_5-3-导出规范" aria-label="Permalink to &quot;5.3 导出规范&quot;">​</a></h3><p><strong>统一使用 index.ts</strong></p><ul><li>每个目录都应该有一个 <code>index.ts</code> 作为入口文件</li><li>统一导出目录下的所有内容，简化导入路径</li></ul><p><strong>命名导出优于默认导出</strong></p><ul><li>推荐：使用命名导出（<code>export function</code>），便于按需导入和重命名</li><li>组件文件使用默认导出（Vue 组件的要求），在 <code>index.ts</code> 中重新导出为命名导出</li></ul><h2 id="六、工程化配置要点" tabindex="-1">六、工程化配置要点 <a class="header-anchor" href="#六、工程化配置要点" aria-label="Permalink to &quot;六、工程化配置要点&quot;">​</a></h2><h3 id="_6-1-路径别名配置" tabindex="-1">6.1 路径别名配置 <a class="header-anchor" href="#_6-1-路径别名配置" aria-label="Permalink to &quot;6.1 路径别名配置&quot;">​</a></h3><p>在 <code>vite.config.ts</code> 中设置路径别名：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vitejs/plugin-vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;path&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  resolve: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    alias: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;@&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;@core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;@shared&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/shared&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;@modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>在 <code>tsconfig.json</code> 中配置对应的路径映射：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;baseUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;paths&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;@/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;@core/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/core/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;@shared/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/shared/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;@modules/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/modules/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_6-2-typescript-配置" tabindex="-1">6.2 TypeScript 配置 <a class="header-anchor" href="#_6-2-typescript-配置" aria-label="Permalink to &quot;6.2 TypeScript 配置&quot;">​</a></h3><p><strong>严格模式设置：</strong></p><ul><li>启用 <code>strict</code> 模式，提升类型安全</li><li>配置未使用变量和参数的检查</li></ul><p><strong>类型声明文件：</strong></p><ul><li>在 <code>vite-env.d.ts</code> 中声明 Vite 相关的类型</li><li>声明环境变量的类型，确保类型安全</li></ul><h3 id="_6-3-代码质量工具" tabindex="-1">6.3 代码质量工具 <a class="header-anchor" href="#_6-3-代码质量工具" aria-label="Permalink to &quot;6.3 代码质量工具&quot;">​</a></h3><p><strong>ESLint 配置：</strong></p><ul><li>配置 Vue 3 和 TypeScript 的 ESLint 规则</li><li>集成到开发流程中，自动检查代码质量</li></ul><p><strong>Prettier 配置：</strong></p><ul><li>统一代码格式化规则</li><li>与 ESLint 配合使用，确保代码风格一致</li></ul><h2 id="七、最佳实践" tabindex="-1">七、最佳实践 <a class="header-anchor" href="#七、最佳实践" aria-label="Permalink to &quot;七、最佳实践&quot;">​</a></h2><h3 id="_7-1-目录深度控制" tabindex="-1">7.1 目录深度控制 <a class="header-anchor" href="#_7-1-目录深度控制" aria-label="Permalink to &quot;7.1 目录深度控制&quot;">​</a></h3><p><strong>建议不超过 4 层嵌套</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/</span></span>
<span class="line"><span>└── modules/</span></span>
<span class="line"><span>    └── user/</span></span>
<span class="line"><span>        └── views/</span></span>
<span class="line"><span>            └── UserListView.vue  # 4 层</span></span></code></pre></div><h3 id="_7-2-代码组织原则" tabindex="-1">7.2 代码组织原则 <a class="header-anchor" href="#_7-2-代码组织原则" aria-label="Permalink to &quot;7.2 代码组织原则&quot;">​</a></h3><p><strong>就近原则</strong>：相关代码放在一起</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>modules/user/components/</span></span>
<span class="line"><span>├── UserForm.vue</span></span>
<span class="line"><span>├── UserFormDialog.vue</span></span>
<span class="line"><span>└── UserTable.vue</span></span></code></pre></div><p><strong>单一数据源</strong>：避免重复定义</p><ul><li>在 <code>types/</code> 或 <code>constants/</code> 目录下统一定义</li><li>其他地方通过导入使用</li></ul><p><strong>关注点分离</strong>：</p><ul><li>API 调用逻辑 → <code>composables/</code>（纯 API 封装）</li><li>状态管理逻辑 → <code>stores/</code>（状态管理）</li><li>业务逻辑 → <code>hooks/</code>（组合 Store + Composable）</li><li>UI 展示逻辑 → <code>components/</code> 和 <code>views/</code></li><li>工具函数 → <code>utils/</code>（纯函数）</li></ul><h3 id="_7-3-模块间依赖管理" tabindex="-1">7.3 模块间依赖管理 <a class="header-anchor" href="#_7-3-模块间依赖管理" aria-label="Permalink to &quot;7.3 模块间依赖管理&quot;">​</a></h3><p><strong>依赖方向规则：</strong></p><ol><li><strong>core/</strong> 不依赖任何其他层（最底层）</li><li><strong>shared/</strong> 只能依赖 <code>core/</code></li><li><strong>modules/</strong> 可以依赖 <code>core/</code> 和 <code>shared/</code>，但不能依赖其他 <code>modules/</code></li><li><strong>views</strong> 不应该被其他层依赖（最顶层）</li><li><strong>hooks</strong> 可以依赖同模块的 <code>stores</code> 和 <code>composables</code>，也可以依赖 <code>shared/</code> 的对应层</li><li><strong>stores</strong> 调用同模块的 <code>composables</code>，不直接调用 API</li><li><strong>utils</strong> 是纯函数，只依赖 <code>core/</code> 的工具函数</li></ol><p><strong>避免循环依赖：</strong></p><ul><li>将共同依赖的类型或工具提取到 <code>shared/</code> 目录</li><li>各模块从 <code>shared/</code> 导入，而不是相互导入</li></ul><p><strong>模块间通信：</strong></p><ul><li>通过 <code>shared/</code> 的状态管理：跨模块状态放在 <code>shared/stores/</code></li><li>通过路由参数：通过 URL 传递数据</li><li>避免模块间直接导入和调用函数</li></ul><h3 id="_7-4-常见问题解决" tabindex="-1">7.4 常见问题解决 <a class="header-anchor" href="#_7-4-常见问题解决" aria-label="Permalink to &quot;7.4 常见问题解决&quot;">​</a></h3><p><strong>循环依赖问题：</strong></p><ul><li>提取共享代码到 <code>shared/</code></li><li>使用依赖注入</li><li>重新设计模块边界</li></ul><p><strong>类型定义重复：</strong></p><ul><li>在 <code>modules/[module]/types/</code> 目录下统一定义</li><li>使用 TypeScript 的工具类型（Pick、Omit、Partial 等）避免重复</li></ul><p><strong>模块边界模糊：</strong></p><ul><li>为每个模块定义清晰的职责范围</li><li>使用文档说明模块的边界</li><li>定期审查和重构模块结构</li></ul><h2 id="八、总结" tabindex="-1">八、总结 <a class="header-anchor" href="#八、总结" aria-label="Permalink to &quot;八、总结&quot;">​</a></h2><h3 id="核心目标" tabindex="-1">核心目标 <a class="header-anchor" href="#核心目标" aria-label="Permalink to &quot;核心目标&quot;">​</a></h3><ol><li><strong>可维护性</strong>：清晰的目录结构使代码易于理解和修改</li><li><strong>可扩展性</strong>：模块化设计便于添加新功能</li><li><strong>可测试性</strong>：良好的结构使单元测试和集成测试更容易</li><li><strong>团队协作</strong>：统一的规范减少沟通成本，提高开发效率</li><li><strong>类型安全</strong>：完善的类型定义提升代码质量和开发体验</li></ol><h3 id="关键设计原则" tabindex="-1">关键设计原则 <a class="header-anchor" href="#关键设计原则" aria-label="Permalink to &quot;关键设计原则&quot;">​</a></h3><ol><li><strong>关注点分离</strong>：不同职责的代码分离到不同目录</li><li><strong>单一职责</strong>：每个文件、每个目录都有明确的单一职责</li><li><strong>模块化与解耦</strong>：通过模块化设计降低代码耦合度</li><li><strong>约定优于配置</strong>：建立清晰的命名和结构约定</li><li><strong>一致性原则</strong>：在整个项目中保持结构、命名的一致性</li><li><strong>Store + Composable + Hooks 架构模式</strong>：通过清晰的职责划分实现代码的可维护性和可测试性</li></ol><h3 id="实践建议" tabindex="-1">实践建议 <a class="header-anchor" href="#实践建议" aria-label="Permalink to &quot;实践建议&quot;">​</a></h3><ol><li><strong>采用标准架构模式</strong>：使用 Store + Composable + Hooks 架构模式，确保职责清晰</li><li><strong>明确划分标准</strong>：建立清晰的&quot;core/shared/modules&quot;划分标准，减少决策成本</li><li><strong>团队共识</strong>：确保团队成员理解并遵循结构规范</li><li><strong>定期审查</strong>：定期审查目录结构，及时重构不符合规范的部分</li><li><strong>文档维护</strong>：保持文档与代码同步，及时更新结构说明和划分标准</li></ol><hr><h2 id="参考资源" tabindex="-1">参考资源 <a class="header-anchor" href="#参考资源" aria-label="Permalink to &quot;参考资源&quot;">​</a></h2><h3 id="官方文档" tabindex="-1">官方文档 <a class="header-anchor" href="#官方文档" aria-label="Permalink to &quot;官方文档&quot;">​</a></h3><ul><li><a href="https://vuejs.org/" target="_blank" rel="noreferrer">Vue 3 官方文档</a></li><li><a href="https://www.typescriptlang.org/" target="_blank" rel="noreferrer">TypeScript 官方文档</a></li><li><a href="https://vitejs.dev/" target="_blank" rel="noreferrer">Vite 官方文档</a></li><li><a href="https://pinia.vuejs.org/" target="_blank" rel="noreferrer">Pinia 官方文档</a></li><li><a href="https://router.vuejs.org/" target="_blank" rel="noreferrer">Vue Router 官方文档</a></li></ul>`,157))])}const B=k(E,[["render",d]]);export{C as __pageData,B as default};
