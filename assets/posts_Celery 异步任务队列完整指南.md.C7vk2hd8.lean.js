import{_ as e,C as r,c as E,o as a,a0 as n,b as h,w as i,a as t,G as p,a2 as k}from"./chunks/framework.DXI-tbPr.js";const C=JSON.parse('{"title":"Celery 异步任务队列完整指南","description":"Celery 异步任务队列实战指南，包含 FastAPI 集成、数据库连接管理、异步任务编写、常见问题解决方案和性能优化建议。基于实际项目经验，专注于生产环境最佳实践。","frontmatter":{"title":"Celery 异步任务队列完整指南","description":"Celery 异步任务队列实战指南，包含 FastAPI 集成、数据库连接管理、异步任务编写、常见问题解决方案和性能优化建议。基于实际项目经验，专注于生产环境最佳实践。","date":"2026-01-19T15:16:00.000Z","tags":["Celery","Python"]},"headers":[],"relativePath":"posts/Celery 异步任务队列完整指南.md","filePath":"posts/Celery 异步任务队列完整指南.md","lastUpdated":1768815907000}'),d={name:"posts/Celery 异步任务队列完整指南.md"};function g(y,s,o,c,F,A){const l=r("Mermaid");return a(),E("div",null,[s[7]||(s[7]=n("",17)),(a(),h(k,null,{default:i(()=>[p(l,{id:"mermaid-207",class:"mermaid",graph:"graph%20LR%0A%20%20%20%20A%5BProducer%3Cbr%2F%3EFastAPI%E5%BA%94%E7%94%A8%5D%20--%3E%7C%E5%8F%91%E9%80%81%E4%BB%BB%E5%8A%A1%7C%20B%5BBroker%3Cbr%2F%3ERedis%2FRabbitMQ%5D%0A%20%20%20%20B%20--%3E%7C%E5%88%86%E5%8F%91%E4%BB%BB%E5%8A%A1%7C%20C%5BWorker%3Cbr%2F%3E%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C%E8%BF%9B%E7%A8%8B%5D%0A%20%20%20%20C%20--%3E%7C%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%9C%7C%20D%5BBackend%3Cbr%2F%3E%E7%BB%93%E6%9E%9C%E5%AD%98%E5%82%A8%5D%0A%20%20%20%20A%20--%3E%7C%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%7C%20D%0A%20%20%20%20%0A%20%20%20%20style%20A%20fill%3A%23e1f5ff%0A%20%20%20%20style%20B%20fill%3A%23fff4e1%0A%20%20%20%20style%20C%20fill%3A%23e8f5e9%0A%20%20%20%20style%20D%20fill%3A%23f3e5f5%0A"})]),fallback:i(()=>[...s[0]||(s[0]=[t(" Loading... ",-1)])]),_:1})),s[8]||(s[8]=n("",31)),(a(),h(k,null,{default:i(()=>[p(l,{id:"mermaid-332",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20subgraph%20%22Web%E5%B1%82%22%0A%20%20%20%20%20%20%20%20A%5BFastAPI%E5%BA%94%E7%94%A8%5D%20--%3E%7C%E8%B0%83%E7%94%A8%E4%BB%BB%E5%8A%A1%7C%20B%5BCelery%20Client%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%22%E6%B6%88%E6%81%AF%E5%B1%82%22%0A%20%20%20%20%20%20%20%20B%20--%3E%7C%E5%8F%91%E9%80%81%E4%BB%BB%E5%8A%A1%7C%20C%5BRedis%20Broker%5D%0A%20%20%20%20%20%20%20%20C%20--%3E%7C%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%7C%20D%5BCelery%20Worker%5D%0A%20%20%20%20%20%20%20%20D%20--%3E%7C%E7%BB%93%E6%9E%9C%7C%20E%5BRedis%20Backend%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%22%E6%95%B0%E6%8D%AE%E5%B1%82%22%0A%20%20%20%20%20%20%20%20A%20--%3E%7CWeb%20Engine%3Cbr%2F%3EQueuePool%7C%20F%5B(PostgreSQL)%5D%0A%20%20%20%20%20%20%20%20D%20--%3E%7CTask%20Engine%3Cbr%2F%3ENullPool%7C%20F%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%22%E4%BB%BB%E5%8A%A1%E6%A8%A1%E5%9D%97%22%0A%20%20%20%20%20%20%20%20D%20--%3E%20G%5Bmodules.file.tasks%5D%0A%20%20%20%20%20%20%20%20D%20--%3E%20H%5Bmodules.other.tasks%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20style%20A%20fill%3A%23e1f5ff%0A%20%20%20%20style%20D%20fill%3A%23e8f5e9%0A%20%20%20%20style%20C%20fill%3A%23fff4e1%0A%20%20%20%20style%20E%20fill%3A%23fff4e1%0A%20%20%20%20style%20F%20fill%3A%23f3e5f5%0A"})]),fallback:i(()=>[...s[1]||(s[1]=[t(" Loading... ",-1)])]),_:1})),s[9]||(s[9]=n("",23)),(a(),h(k,null,{default:i(()=>[p(l,{id:"mermaid-473",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5BCelery%20Worker%3Cbr%2F%3E%E5%90%8C%E6%AD%A5%E8%BF%9B%E7%A8%8B%5D%20--%3E%7Casyncio.run%7C%20B%5B%E5%88%9B%E5%BB%BA%E6%96%B0Event%20Loop%5D%0A%20%20%20%20B%20--%3E%7CTaskSessionLocal%7C%20C%5B%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93Session%3Cbr%2F%3ENullPool%20Engine%5D%0A%20%20%20%20C%20--%3E%7C%E6%89%A7%E8%A1%8C%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%7C%20D%5Bprocess_func%5D%0A%20%20%20%20D%20--%3E%7C%E6%88%90%E5%8A%9F%7C%20E%5Bcommit%E4%BA%8B%E5%8A%A1%5D%0A%20%20%20%20D%20--%3E%7C%E5%A4%B1%E8%B4%A5%7C%20F%5Brollback%E4%BA%8B%E5%8A%A1%5D%0A%20%20%20%20E%20--%3E%7C%E8%AE%B0%E5%BD%95%E6%97%A5%E5%BF%97%7C%20G%5B%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%5D%0A%20%20%20%20F%20--%3E%7C%E8%AE%B0%E5%BD%95%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%7C%20H%5B%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%5D%0A%20%20%20%20G%20--%3E%7CLoop%E9%94%80%E6%AF%81%7C%20I%5B%E4%BB%BB%E5%8A%A1%E5%AE%8C%E6%88%90%5D%0A%20%20%20%20H%20--%3E%7CLoop%E9%94%80%E6%AF%81%7C%20I%0A%20%20%20%20%0A%20%20%20%20style%20A%20fill%3A%23e8f5e9%0A%20%20%20%20style%20B%20fill%3A%23fff4e1%0A%20%20%20%20style%20C%20fill%3A%23e1f5ff%0A%20%20%20%20style%20D%20fill%3A%23f3e5f5%0A"})]),fallback:i(()=>[...s[2]||(s[2]=[t(" Loading... ",-1)])]),_:1})),s[10]||(s[10]=n("",19)),(a(),h(k,null,{default:i(()=>[p(l,{id:"mermaid-555",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20TaskA%20as%20%E4%BB%BB%E5%8A%A1A%20(Loop%20A)%0A%20%20%20%20participant%20Pool%20as%20%E8%BF%9E%E6%8E%A5%E6%B1%A0%20(QueuePool)%0A%20%20%20%20participant%20TaskB%20as%20%E4%BB%BB%E5%8A%A1B%20(Loop%20B)%0A%20%20%20%20participant%20DB%20as%20PostgreSQL%0A%20%20%20%20%0A%20%20%20%20TaskA-%3E%3EPool%3A%20%E8%8E%B7%E5%8F%96%E8%BF%9E%E6%8E%A5%0A%20%20%20%20Pool-%3E%3EDB%3A%20%E5%88%9B%E5%BB%BA%E8%BF%9E%E6%8E%A5%20(%E7%BB%91%E5%AE%9ALoop%20A)%0A%20%20%20%20TaskA-%3E%3EDB%3A%20%E6%89%A7%E8%A1%8C%E6%9F%A5%E8%AF%A2%0A%20%20%20%20TaskA-%3E%3EPool%3A%20%E5%BD%92%E8%BF%98%E8%BF%9E%E6%8E%A5%20(%E4%BB%8D%E7%BB%91%E5%AE%9ALoop%20A)%0A%20%20%20%20Note%20over%20TaskA%3A%20Loop%20A%20%E9%94%80%E6%AF%81%0A%20%20%20%20%0A%20%20%20%20TaskB-%3E%3EPool%3A%20%E8%8E%B7%E5%8F%96%E8%BF%9E%E6%8E%A5%0A%20%20%20%20Pool-%3E%3ETaskB%3A%20%E8%BF%94%E5%9B%9E%E6%97%A7%E8%BF%9E%E6%8E%A5%20(%E7%BB%91%E5%AE%9ALoop%20A)%0A%20%20%20%20TaskB-%3E%3EDB%3A%20%E5%B0%9D%E8%AF%95%E4%BD%BF%E7%94%A8%E6%97%A7%E8%BF%9E%E6%8E%A5%0A%20%20%20%20DB--%3E%3ETaskB%3A%20%E2%9D%8C%20InterfaceError%0A"})]),fallback:i(()=>[...s[3]||(s[3]=[t(" Loading... ",-1)])]),_:1})),s[11]||(s[11]=n("",7)),(a(),h(k,null,{default:i(()=>[p(l,{id:"mermaid-631",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20subgraph%20%22Web%E6%9C%8D%E5%8A%A1%20(QueuePool)%22%0A%20%20%20%20%20%20%20%20A1%5BFastAPI%E8%AF%B7%E6%B1%82%5D%20--%3E%7C%E5%A4%8D%E7%94%A8%E8%BF%9E%E6%8E%A5%7C%20B1%5B%E8%BF%9E%E6%8E%A5%E6%B1%A0%5D%0A%20%20%20%20%20%20%20%20B1%20--%3E%7C%E5%85%B1%E4%BA%AB%E8%BF%9E%E6%8E%A5%7C%20C1%5B(PostgreSQL)%5D%0A%20%20%20%20%20%20%20%20Note1%5BLoop%E6%8C%81%E4%B9%85%E5%AD%98%E5%9C%A8%3Cbr%2F%3E%E8%BF%9E%E6%8E%A5%E5%8F%AF%E5%AE%89%E5%85%A8%E5%A4%8D%E7%94%A8%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%22Celery%E4%BB%BB%E5%8A%A1%20(NullPool)%22%0A%20%20%20%20%20%20%20%20A2%5B%E4%BB%BB%E5%8A%A1A%20Loop%20A%5D%20--%3E%7C%E6%96%B0%E5%BB%BA%E8%BF%9E%E6%8E%A5%7C%20C2%5B(PostgreSQL)%5D%0A%20%20%20%20%20%20%20%20A3%5B%E4%BB%BB%E5%8A%A1B%20Loop%20B%5D%20--%3E%7C%E6%96%B0%E5%BB%BA%E8%BF%9E%E6%8E%A5%7C%20C2%0A%20%20%20%20%20%20%20%20Note2%5B%E6%AF%8F%E4%B8%AA%E4%BB%BB%E5%8A%A1%E7%8B%AC%E7%AB%8BLoop%3Cbr%2F%3E%E6%AF%8F%E6%AC%A1%E6%96%B0%E5%BB%BA%E8%BF%9E%E6%8E%A5%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20style%20B1%20fill%3A%23fff4e1%0A%20%20%20%20style%20Note1%20fill%3A%23e8f5e9%0A%20%20%20%20style%20Note2%20fill%3A%23e8f5e9%0A"})]),fallback:i(()=>[...s[4]||(s[4]=[t(" Loading... ",-1)])]),_:1})),s[12]||(s[12]=n("",8)),(a(),h(k,null,{default:i(()=>[p(l,{id:"mermaid-666",class:"mermaid",graph:"stateDiagram-v2%0A%20%20%20%20%5B*%5D%20--%3E%20PENDING%3A%20%E4%BB%BB%E5%8A%A1%E5%88%9B%E5%BB%BA%0A%20%20%20%20PENDING%20--%3E%20PROCESSING%3A%20Worker%E6%8E%A5%E6%94%B6%E4%BB%BB%E5%8A%A1%0A%20%20%20%20PROCESSING%20--%3E%20COMPLETED%3A%20%E6%89%A7%E8%A1%8C%E6%88%90%E5%8A%9F%0A%20%20%20%20PROCESSING%20--%3E%20FAILED%3A%20%E6%89%A7%E8%A1%8C%E5%A4%B1%E8%B4%A5%0A%20%20%20%20FAILED%20--%3E%20RETRY%3A%20%E8%87%AA%E5%8A%A8%E9%87%8D%E8%AF%95%0A%20%20%20%20RETRY%20--%3E%20PROCESSING%3A%20%E9%87%8D%E6%96%B0%E6%89%A7%E8%A1%8C%0A%20%20%20%20COMPLETED%20--%3E%20%5B*%5D%0A%20%20%20%20FAILED%20--%3E%20%5B*%5D%3A%20%E8%B6%85%E8%BF%87%E9%87%8D%E8%AF%95%E6%AC%A1%E6%95%B0%0A%20%20%20%20%0A%20%20%20%20note%20right%20of%20PROCESSING%0A%20%20%20%20%20%20%20%20%E6%89%A7%E8%A1%8C%E9%98%B6%E6%AE%B5%EF%BC%9A%0A%20%20%20%20%20%20%20%201.%20%E5%88%9B%E5%BB%BAEvent%20Loop%0A%20%20%20%20%20%20%20%202.%20%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93Session%0A%20%20%20%20%20%20%20%203.%20%E6%89%A7%E8%A1%8C%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%0A%20%20%20%20%20%20%20%204.%20%E6%8F%90%E4%BA%A4%2F%E5%9B%9E%E6%BB%9A%E4%BA%8B%E5%8A%A1%0A%20%20%20%20%20%20%20%205.%20%E9%94%80%E6%AF%81Loop%0A%20%20%20%20end%20note%0A"})]),fallback:i(()=>[...s[5]||(s[5]=[t(" Loading... ",-1)])]),_:1})),s[13]||(s[13]=n("",100)),(a(),h(k,null,{default:i(()=>[p(l,{id:"mermaid-1022",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%5D%20--%3E%7C%E8%A7%A6%E5%8F%91%E4%BB%BB%E5%8A%A1%7C%20B%5Bembed_file_task%5D%0A%20%20%20%20B%20--%3E%20C%5B%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81%3A%20PROCESSING%5D%0A%20%20%20%20C%20--%3E%20D%5B%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%5D%0A%20%20%20%20D%20--%3E%7C%E5%A4%B1%E8%B4%A5%7C%20E%5B%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81%3A%20FAILED%5D%0A%20%20%20%20D%20--%3E%7C%E6%88%90%E5%8A%9F%7C%20F%5B%E8%A7%A3%E6%9E%90%E6%96%87%E4%BB%B6%5D%0A%20%20%20%20F%20--%3E%7C%E5%A4%B1%E8%B4%A5%7C%20E%0A%20%20%20%20F%20--%3E%7C%E6%88%90%E5%8A%9F%7C%20G%7B%E6%98%AF%E5%90%A6%E6%9C%89%E5%9B%BE%E7%89%87%3F%7D%0A%20%20%20%20G%20--%3E%7C%E6%98%AF%7C%20H%5B%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E5%88%B0MinIO%5D%0A%20%20%20%20G%20--%3E%7C%E5%90%A6%7C%20I%5B%E5%90%88%E5%B9%B6%E5%9B%BE%E7%89%87%E5%88%B0%E6%96%87%E6%A1%A3%5D%0A%20%20%20%20H%20--%3E%20I%0A%20%20%20%20I%20--%3E%20J%5B%E5%90%91%E9%87%8F%E5%8C%96%E5%A4%84%E7%90%86%5D%0A%20%20%20%20J%20--%3E%7C%E5%A4%B1%E8%B4%A5%7C%20E%0A%20%20%20%20J%20--%3E%7C%E6%88%90%E5%8A%9F%7C%20K%5B%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81%3A%20COMPLETED%5D%0A%20%20%20%20K%20--%3E%20L%5B%E5%8F%91%E5%B8%83Redis%E9%80%9A%E7%9F%A5%5D%0A%20%20%20%20E%20--%3E%20L%0A%20%20%20%20%0A%20%20%20%20style%20B%20fill%3A%23e8f5e9%0A%20%20%20%20style%20E%20fill%3A%23ffebee%0A%20%20%20%20style%20K%20fill%3A%23e8f5e9%0A"})]),fallback:i(()=>[...s[6]||(s[6]=[t(" Loading... ",-1)])]),_:1})),s[14]||(s[14]=n("",20))])}const B=e(d,[["render",g]]);export{C as __pageData,B as default};
